  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Restaurant QR Code App</title>
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r;
            k.onerror = function() {
                // Пробуем альтернативный способ загрузки через setTimeout
                setTimeout(function() {
                    try {
                        var k2 = e.createElement(t);
                        k2.async = 1;
                        k2.src = r.replace('mc.yandex.ru', 'mc.yandex.ru');
                        k2.onerror = function() {
                            // Если и это не работает, пробуем через data URI или другой метод
                            console.log('Yandex.Metrika: alternative load methods failed');
                        };
                        a.parentNode.insertBefore(k2, a);
                    } catch(e2) {
                        console.log('Yandex.Metrika: fallback failed');
                    }
                }, 100);
            };
            a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105468742', 'ym');
        
        // Инициализация с обработкой ошибок и повторными попытками
        function initMetrika() {
            try {
                if (typeof ym !== 'undefined') {
                    ym(105468742, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
                } else {
                    // Повторная попытка через 500ms
                    setTimeout(initMetrika, 500);
                }
            } catch(e) {
                // Повторная попытка через 1 секунду
                setTimeout(initMetrika, 1000);
            }
        }
        
        // Запускаем инициализацию после загрузки страницы
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMetrika);
        } else {
            initMetrika();
        }
    </script>
    <!-- /Yandex.Metrika counter -->
    
    <style>
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #F0F6FF;
        background-image: url('/mvp/loading-bg.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
      }

      #loading-screen.hidden {
        opacity: 0;
        visibility: hidden;
      }

      .loading-dots {
        display: flex;
        gap: 0.5rem;
        margin-top: auto;
        margin-bottom: 3rem;
      }

      .loading-dot {
        width: 10px;
        height: 10px;
        background: #030213;
        border-radius: 50%;
        animation: bounce 1.4s ease-in-out infinite;
      }

      .loading-dot:nth-child(1) {
        animation-delay: 0s;
      }

      .loading-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .loading-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes bounce {
        0%, 80%, 100% {
          transform: scale(0.8);
          opacity: 0.5;
        }
        40% {
          transform: scale(1.2);
          opacity: 1;
        }
      }
    </style>
    </head>

    <body>
    <noscript><div><img src="https://mc.yandex.ru/watch/105468742" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <div id="loading-screen">
      <div class="loading-dots">
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
      </div>
    </div>
      <div id="root"></div>
      <script type="module" src="/src/main.tsx"></script>
    </body>
  </html>
  